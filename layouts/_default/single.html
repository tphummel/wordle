{{ define "main" }}

<h1>{{.Title}}</h1>

<p>
  {{ partial "breadcrumb.html" . }}
  {{ partial "tag-list.html" . }}
</p>

<p>Date: <strong>{{ .Date.Local.Format "January 2, 2006"  }}</strong></p>
<p>Puzzle: <strong>{{ .Params.puzzle | default "--" }}</strong></p>
<p>Outcome: <strong>{{ lower .Params.state.gameStatus}}</strong></p>
<p>Hard Mode: <strong>{{ .Params.state.hardMode}}</strong></p>
<p>Guesses: <strong>{{ partial "guess-count" . }}</strong></p>
<p>
  <details>
    <summary>
      Puzzle Score: <strong>{{ partial "puzzle-score.html" . }}</strong>
    </summary>
    {{ partial "puzzle-score-detail.html" .}}
  </details>
</p>

<div>
{{ range $g, $guess := .Params.state.boardState }}
  {{ range $c, $char := split $guess "" }}
    {{ $eval := index $.Params.state.evaluations $g $c }}
    {{ if eq $eval "correct"}}
      🟩
    {{ else if eq $eval "present"}}
      🟨
    {{ else }}
      ⬛️
    {{ end }}
  {{ end }}
  <br />
{{ end }}
</div>


<table>
  {{ range $g, $guess := .Params.state.boardState }}
    <tr>
      {{ range $c, $char := split $guess "" }}
        {{ $eval := index $.Params.state.evaluations $g $c }}

        {{ $style := "" }}
        {{ if eq $eval "correct"}}
          {{ $style = "color: green" }}
        {{ else if eq $eval "present"}}
          {{ $style = "color: yellow" }}
        {{ else }}

        {{ end }}
        <td style="{{ $style }}">
          {{ $char }}
        </td>
      {{ end }}
    </tr>
  {{ end }}

</table>

{{ .Content }}

{{ end }}
